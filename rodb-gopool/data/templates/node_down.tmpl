{{/* Dedicated node-unavailable page for the main overview */}}
<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="icon" type="image/png" sizes="64x64" href="/favicon.png">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="refresh" content="10">
	<title>{{if .BrandDomain}}{{.BrandDomain}}{{else}}{{.BrandName}}{{end}} â€” {{.Title}}</title>
	<link rel="stylesheet" href="/style.css">
</head>
<body>
	{{template "header" .}}
	<main class="page" id="content">
		<h1>{{.Title}}</h1>
		<div class="card" style="display:flex;gap:16px;align-items:center;">
			<img src="/logo.png" alt="{{.BrandName}} logo" style="width:64px;height:64px;flex:0 0 auto;">
			<div>
				<p class="text-sm" style="margin:0;">
					{{.Message}}
				</p>
				{{if .Detail}}
				<p class="text-sm" style="margin-top:6px;color:#b3bbd4;">
					{{.Detail}}
				</p>
				{{end}}
				<p class="text-sm" style="margin-top:8px;color:#b3bbd4;">
					This page auto-refreshes as the node reconnects and a fresh template becomes available.
				</p>
			</div>
		</div>
		<div class="card">
			<div class="label">What you can do</div>
			<p class="text-sm" style="margin-top:8px;">
				Miners should pause or reconnect later. Operators should check the node RPC/ZMQ connectivity and ensure Bitcoin Core is fully synced.
			</p>
		</div>
		{{template "footer" .}}
	</main>
	<script>
	(function () {
		const VISIBLE_REFRESH_MS = 5000;
		const HIDDEN_REFRESH_MS = 15000;
		let timer = null;

		function refreshDelay() {
			return document.hidden ? HIDDEN_REFRESH_MS : VISIBLE_REFRESH_MS;
		}

		function schedule() {
			if (timer) clearTimeout(timer);
			timer = setTimeout(() => {
				// Re-request the page so it can switch back to the overview as soon
				// as the node is healthy and fresh work is available.
				window.location.reload();
			}, refreshDelay());
		}

		document.addEventListener('visibilitychange', schedule);
		schedule();
	})();
	</script>
</body>
</html>
