# Configuration
YOUR_TZ="America/Los_Angeles"
# YOUR_TZ="UTC"
COIN="â‚¿ BTC"
TARGET=$(curl -s https://mempool.space/api/blocks/tip/height)
NODE_PATH="/home/umbrel/umbrel/app-data/bitcoin"
BLOCKCHAIN_DIR="data/bitcoin"
DOCKER_CONTAINER_NAME="bitcoin_app_1"
RPC_PORT=""
RPC_USER=""
RPC_PASSWORD=""
CLI_BINARY="bitcoin-cli"
NODE_LOGFILE="debug.log"

# --- DYNAMIC DOCKER COMMAND SELECTION ---
STAT_PATH="/proc/stat"
# 1. Check if we are already inside a container
if [ -f /.dockerenv ]; then
    DOCKER_CMD="docker"
    STAT_PATH="/host/proc/stat"
# 2. If on host, check if current user needs sudo for docker
elif ! docker ps >/dev/null 2>&1; then
    DOCKER_CMD="sudo docker"
else
    DOCKER_CMD="docker"
fi

# Dynamic Calculations
TARGET_DATE=$(TZ="${YOUR_TZ}" date +"%Y-%m-%d %H:%M")
[ -z "$TARGET" ] && TARGET=999999 
if [ "$TARGET" -eq 999999 ]; then TARGET_COL="${R}"; else TARGET_COL="${Y}"; fi
CLI_PATH="${DOCKER_CMD} exec -i ${DOCKER_CONTAINER_NAME} ${CLI_BINARY} "
# CLI_PATH="./cli.sh"
CHAIN_PATH="${NODE_PATH}/${BLOCKCHAIN_DIR}/chainstate"
BLOCK_PATH="${NODE_PATH}/${BLOCKCHAIN_DIR}/blocks"
PEER_HISTORY="/tmp/peer_history"

# --- DISCORD CONFIG ---
DISCORD_URL=""
MY_UID=0
DISCORD_BLOCK_NOTIFICATION=10000
